import{u as e,_ as o}from"./ht-message-box.CCMhGwSe.js";import{d as l,a1 as t,r as a,c as n,z as u,a4 as s,a8 as i,b as d,e as r,f as c,g as p,w as m,h as v,k as f,l as h,F as g,A as b,p as _,B as y,x,I as V,ab as $,m as w,i as k,t as C,J as j,n as z,V as K,W as T,G as S,j as I,H as U,u as P}from"./index-Bl407YMq.js";import{b as B,m as N,c as q,d as F,g as H,a as O,_ as M}from"./base64.CiSqhNY6.js";import{u as Q,b as A,d as E,_ as G}from"./ht-loading.DCn6to1m.js";import{p as L,r as X,c as Y}from"./clickoutside.CJmLG0WC.js";import{q as D,_ as J}from"./page-wraper.D_DLAzgo.js";import{u as W}from"./useChildren.CidG9Z_9.js";import{_ as R}from"./demo-block.DyA2odLx.js";import{_ as Z}from"./ht-slider.DqRXi-B-.js";import{_ as ee}from"./ht-button.8vkNbh4T.js";import{_ as oe}from"./ht-sort-button.DeJPo02L.js";import"./ht-input.DYKMvWpj.js";import"./useTranslate.C8VGrN03.js";import"./useTouch.b37GVTmH.js";const le=Symbol("ht-drop-menu"),te={...B,zIndex:N(12),direction:q("down"),modal:F(!0),closeOnClickModal:F(!0),duration:N(200)},ae=M(l({name:"ht-drop-menu-item",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...B,customTitle:q(""),customIcon:q(""),modelValue:[String,Number],options:H(),disabled:F(!1),iconName:q("check"),title:String,icon:q("arrow-down"),iconSize:q("14px"),beforeToggle:Function,valueKey:q("value"),labelKey:q("label"),tipKey:q("tip"),customPopupClass:q(""),customPopupStyle:q("")},emits:["change","update:modelValue","open","opened","closed","close"],setup(e,{expose:o,emit:l}){const K=e,T=l,S=t(D,null),I=a(!1),U=a(!1),P=a(),B=a(12),N=a(!0),q=a(0),{parent:F}=Q(le),{proxy:H}=V(),M=n((()=>{let e="";return e=I.value&&F?"down"===F.props.direction?`top: calc(var(--window-top) + ${F.offset.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${F.offset.value}px)`:"",e}));function E(){U.value&&($(K.beforeToggle)?K.beforeToggle({status:!1,resolve:e=>{e&&G()}}):G())}function G(){U.value&&(U.value=!1)}function Y(){U.value||($(K.beforeToggle)?K.beforeToggle({status:!0,resolve:e=>{e&&J()}}):J())}function J(){I.value=!0,U.value=!0,F&&(N.value=Boolean(F.props.modal),q.value=Number(F.props.duration),P.value="down"===F.props.direction?"top":"bottom"),T("open")}function W(){I.value=!1,T("closed")}function R(){T("open")}function Z(){T("opened")}function ee(){T("close")}return u((()=>K.modelValue),(e=>{j(e)&&"number"!=typeof e&&"string"!=typeof e&&console.error("[ht-design] warning(ht-drop-menu-item): the type of value should be a number or a string.")}),{deep:!0,immediate:!0}),s((()=>{S&&S.pushToQueue?S.pushToQueue(H):L(H)})),i((()=>{S&&S.removeFromQueue?S.removeFromQueue(H):X(H)})),o({getShowPop:function(){return U.value},open:Y,close:E,toggle:function(){U.value?E():Y()}}),(e,o)=>{const l=z,t=w,a=d(r("ht-icon"),O),n=d(r("ht-popup"),A);return I.value?(c(),p(t,{key:0,class:_(`ht-drop-item  ${e.customClass}`),style:y(`pointer-events: none; z-index: ${B.value}; ${M.value};${e.customStyle}`)},{default:m((()=>[v(n,{modelValue:U.value,"onUpdate:modelValue":o[0]||(o[0]=e=>U.value=e),"z-index":B.value,duration:q.value,position:P.value,"custom-style":`position: absolute; pointer-events: auto; max-height: 80%;${e.customPopupStyle}`,"custom-class":e.customPopupClass,modal:!1,"close-on-click-modal":!1,onBeforeEnter:R,onAfterEnter:Z,onBeforeLeave:ee,onAfterLeave:W},{default:m((()=>[e.options.length?(c(),p(t,{key:0},{default:m((()=>[(c(!0),f(g,null,h(e.options,((o,n)=>(c(),p(t,{key:n,onClick:e=>function(e){if(K.disabled)return;const{valueKey:o}=K,l=K.options[e],t=void 0!==l[o]?l[o]:l;T("update:modelValue",t),T("change",{value:t,selectedItem:l}),E()}(n),class:_("ht-drop-item__option "+((""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?"is-active":""))},{default:m((()=>[v(t,{class:_(`ht-drop-item__title ${e.customTitle}`)},{default:m((()=>[v(l,null,{default:m((()=>[k(C(o[e.labelKey]?o[e.labelKey]:o),1)])),_:2},1024),o[e.tipKey]?(c(),p(l,{key:0,class:"ht-drop-item__tip"},{default:m((()=>[k(C(o[e.tipKey]),1)])),_:2},1024)):x("",!0)])),_:2},1032,["class"]),(""!==o[e.valueKey]?o[e.valueKey]:o)===e.modelValue?(c(),p(a,{key:0,name:e.iconName,size:"20px",class:_(`ht-drop-item__icon ${e.customIcon}`)},null,8,["name","class"])):x("",!0)])),_:2},1032,["onClick","class"])))),128))])),_:1})):b(e.$slots,"default",{key:1},void 0,!0)])),_:3},8,["modelValue","z-index","duration","position","custom-style","custom-class"])])),_:3},8,["class","style"])):x("",!0)}}}),[["__scopeId","data-v-df0c81cd"]]),ne=M(l({name:"ht-drop-menu",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:te,setup(e){const o=e,l=t(D,null),i=a(`dropMenuId${K()}`),x=a(0),$=a(0),j=n((()=>"down"===o.direction?`top: calc(var(--window-top) + ${x.value}px); bottom: 0;`:`top: 0; bottom: calc(var(--window-bottom) + ${x.value}px)`)),{proxy:z}=V(),{linkChildren:P,children:B}=W(le),N=n((()=>B.some((e=>e.$.exposed.getShowPop())))),q=a(!1);let F;function H(){}function M(e){const{title:o,modelValue:l,options:t,valueKey:a,labelKey:n}=e;if(o)return o;for(let u=0,s=t.length;u<s;u++)if(l===t[u][a])return t[u][n];console.error("[ht-design] warning(ht-drop-menu-item): no value is matched in the options option.")}function Q(e){S(`#${i.value}`,!1,z).then((l=>{if(!l)return;const{top:t,bottom:a}=l;"down"===o.direction?x.value=Number(a):x.value=$.value-Number(t),e.$.exposed.toggle()}))}function A(){o.closeOnClickModal&&B.forEach((e=>{e.$.exposed.close()}))}return u(N,(e=>{F&&clearTimeout(F),e?q.value=!0:F=setTimeout((()=>{q.value=!1,F=null}),16)})),P({props:o,fold:Q,offset:x}),u((()=>o.direction),(e=>{["up","down"].includes(e)||console.error("[wot design] warning(ht-drop-menu): direction must be 'up' or 'down'")}),{deep:!0,immediate:!0}),s((()=>{$.value=T().windowHeight})),(e,o)=>{const t=d(r("ht-overlay"),E),a=w,n=d(r("ht-icon"),O);return c(),p(a,{style:y(e.customStyle),class:_(`ht-drop-menu ${e.customClass}`),onClick:U(H,["stop","prevent"]),id:i.value},{default:m((()=>[v(t,{show:q.value,duration:e.duration,"z-index":12,"custom-style":j.value,onClick:A,onTouchmove:H},null,8,["show","duration","custom-style"]),v(a,{class:"ht-drop-menu__list"},{default:m((()=>[(c(!0),f(g,null,h(I(B),((e,o)=>(c(),p(a,{key:o,onClick:o=>function(e){e&&!e.disabled&&(l&&l.closeOther?l.closeOther(e):Y(e),Q(e))}(e),class:_(`ht-drop-menu__item ${e.disabled?"is-disabled":""} ${e.$.exposed.getShowPop()?"is-active":""}`)},{default:m((()=>[v(a,{class:"ht-drop-menu__item-title"},{default:m((()=>[v(a,{class:"ht-drop-menu__item-title-text"},{default:m((()=>[k(C(M(e)),1)])),_:2},1024),v(n,{name:e.icon,size:e.iconSize,"custom-class":"ht-drop-menu__arrow"},null,8,["name","size"])])),_:2},1024)])),_:2},1032,["onClick","class"])))),128))])),_:1}),b(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","id"])}}}),[["__scopeId","data-v-661559b9"]]),ue=M(l({__name:"Index",setup(l){const{t:t}=P(),n=e(),u=a(),s=a(),i=a(30),f=a(1),h=a(0),g=a(0),b=a(0),_=a(0),y=a(0),x=a(0),V=a(0),$=a(0),j=a(0),z=a([{label:t("quan-bu-shang-pin"),value:0},{label:t("xin-kuan-shang-pin"),value:1,tip:t("zhe-shi-bu-chong-xin-xi")},{label:t("zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian-zhe-shi-bi-jiao-chang-de-shai-xuan-tiao-jian"),value:2}]),K=a([{label:t("zong-he"),value:0},{label:t("xiao-liang"),value:1},{label:t("shang-jia-shi-jian"),value:2}]);function T(){var e;null==(e=s.value)||e.initSlider()}function S({value:e}){console.log(e)}function I({value:e}){console.log(e)}function B({value:e}){console.log(e)}function N({value:e}){console.log(e)}function q({value:e}){console.log(e)}function F({value:e}){console.log(e)}function H({value:e}){console.log(e)}function O({value:e}){console.log(e)}function M({value:e}){console.log(e)}function Q(){u.value.close()}const A=({status:e,resolve:o})=>{n.confirm({title:`${t(e?"yi-bu-da-kai":"yi-bu-guan-bi")}`,msg:`${t(e?"que-ding-yao-da-kai-xia-la-cai-dan-ma":"que-ding-yao-guan-bi-xia-la-cai-dan-ma")}`}).then((()=>{o(!0)})).catch((()=>{o(!1)}))};return(e,l)=>{const t=d(r("ht-message-box"),o),a=w,n=d(r("ht-drop-menu-item"),ae),P=d(r("ht-drop-menu"),ne),E=d(r("demo-block"),R),L=d(r("ht-slider"),Z),X=d(r("ht-cell"),G),Y=d(r("ht-button"),ee),D=d(r("ht-sort-button"),oe),W=d(r("page-wraper"),J);return c(),p(W,null,{default:m((()=>[v(a,{onClick:l[0]||(l[0]=U((()=>{}),["stop"]))},{default:m((()=>[v(t)])),_:1}),v(a,{class:"demo-body"},{default:m((()=>[v(E,{title:e.$t("jiBenYongFa"),transparent:""},{default:m((()=>[v(P,null,{default:m((()=>[v(n,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=e=>f.value=e),options:z.value,onChange:S},null,8,["modelValue","options"]),v(n,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value=e),options:K.value,onChange:I},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),v(E,{title:e.$t("zi-ding-yi-cai-dan-nei-rong"),transparent:""},{default:m((()=>[v(P,null,{default:m((()=>[v(n,{modelValue:g.value,"onUpdate:modelValue":l[3]||(l[3]=e=>g.value=e),options:z.value,onChange:B},null,8,["modelValue","options"]),v(n,{ref_key:"dropMenu",ref:u,title:e.$t("shai-xuan"),onOpened:T},{default:m((()=>[v(a,null,{default:m((()=>[v(L,{modelValue:i.value,"onUpdate:modelValue":l[4]||(l[4]=e=>i.value=e),ref_key:"slider",ref:s},null,8,["modelValue"]),v(X,{title:e.$t("biao-ti-wen-zi-10"),value:"内容"},null,8,["title"]),v(X,{title:e.$t("biao-ti-wen-zi-10"),label:"$t('miaoShuXinXi-0')",value:"内容"},null,8,["title"]),v(a,{style:{padding:"0 10px 20px","box-sizing":"border-box"}},{default:m((()=>[v(Y,{block:"",size:"large",onClick:Q},{default:m((()=>[k(C(e.$t("zhu-yao-an-niu")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["title"])])),_:1})])),_:1},8,["title"]),v(E,{title:e.$t("zi-ding-yi-cai-dan-xuan-xiang"),transparent:""},{default:m((()=>[v(a,{class:"custom-menu"},{default:m((()=>[v(P,{"custom-style":"flex: 1; min-width: 0"},{default:m((()=>[v(n,{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=e=>b.value=e),options:z.value,onChange:N},null,8,["modelValue","options"])])),_:1}),v(a,{style:{flex:"1"}},{default:m((()=>[v(D,{modelValue:_.value,"onUpdate:modelValue":l[6]||(l[6]=e=>_.value=e),title:e.$t("shang-jia-shi-jian"),onChange:q},null,8,["modelValue","title"])])),_:1})])),_:1})])),_:1},8,["title"]),v(E,{title:e.$t("zi-ding-yi-cai-dan-tu-biao"),transparent:""},{default:m((()=>[v(P,null,{default:m((()=>[v(n,{title:e.$t("di-tu"),icon:"location","icon-size":"24px"},null,8,["title"])])),_:1})])),_:1},8,["title"]),v(E,{title:e.$t("yi-bu-da-kai-guan-bi"),transparent:""},{default:m((()=>[v(P,null,{default:m((()=>[v(n,{modelValue:j.value,"onUpdate:modelValue":l[7]||(l[7]=e=>j.value=e),options:z.value,onChange:S,"before-toggle":A},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),v(E,{title:e.$t("xiang-shang-dan-chu"),transparent:""},{default:m((()=>[v(P,{direction:"up"},{default:m((()=>[v(n,{modelValue:y.value,"onUpdate:modelValue":l[8]||(l[8]=e=>y.value=e),options:z.value,onChange:F},null,8,["modelValue","options"]),v(n,{modelValue:x.value,"onUpdate:modelValue":l[9]||(l[9]=e=>x.value=e),options:K.value,onChange:H},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"]),v(E,{title:e.$t("jinYong"),transparent:""},{default:m((()=>[v(P,{direction:"up"},{default:m((()=>[v(n,{modelValue:V.value,"onUpdate:modelValue":l[10]||(l[10]=e=>V.value=e),disabled:"",options:z.value,onChange:O},null,8,["modelValue","options"]),v(n,{modelValue:$.value,"onUpdate:modelValue":l[11]||(l[11]=e=>$.value=e),options:K.value,onChange:M},null,8,["modelValue","options"])])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})}}}),[["__scopeId","data-v-b8151182"]]);export{ue as default};
