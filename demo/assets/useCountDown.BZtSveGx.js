import{r as a,c as o,a8 as e,J as t}from"./index-Bl407YMq.js";import{u as n}from"./useRaf.0FhUEwSb.js";const s=1e3,r=60*s,l=60*r,u=24*l;function i(i){let f,h;const{start:c,cancel:m}=n((function(){i.millisecond?g():j()})),v=a(i.time),M=o((()=>{return{total:a=v.value,days:Math.floor(a/u),hours:Math.floor(a%u/l),minutes:Math.floor(a%l/r),seconds:Math.floor(a%r/s),milliseconds:Math.floor(a%s)};var a})),d=()=>{h=!1,m()},p=()=>Math.max(f-Date.now(),0),x=a=>{v.value=a,t(i.onChange)&&i.onChange(M.value),0===a&&(d(),t(i.onFinish)&&i.onFinish())},g=()=>{h&&(x(p()),v.value>0&&c())},j=()=>{if(h){const e=p();a=e,o=v.value,(Math.floor(a/1e3)!==Math.floor(o/1e3)||0===e)&&x(e),v.value>0&&c()}var a,o};return e(d),{start:()=>{h||(f=Date.now()+v.value,h=!0,c())},pause:d,reset:(a=i.time)=>{d(),v.value=a},current:M}}export{i as u};
