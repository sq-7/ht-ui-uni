import{a1 as t,r as e,ad as o,ac as s,d as a,c as n,an as l,z as r,b as u,e as i,f as c,g as p,w as m,h as d,p as f,i as h,t as _,x as w,k as y,j as b,F as x,A as C,au as B,av as g,J as V,P as k,ab as z,m as v,Q as P}from"./index-Bl407YMq.js";import{_ as E}from"./ht-input.DYKMvWpj.js";import{_ as T}from"./ht-button.8vkNbh4T.js";import{b as I}from"./ht-loading.DCn6to1m.js";import{b as M,c as O,_ as $}from"./base64.CiSqhNY6.js";import{u as j}from"./useTranslate.C8VGrN03.js";const S="__MESSAGE_OPTION__",R=Symbol("None"),N={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function A(a=""){const n=a?S+a:S,l=t(n,e(R));l.value===R&&(l.value=N,o(n,l));const r=t=>e=>{const o=s({type:t},"string"==typeof e?{title:e}:e);return"confirm"===o.type||"prompt"===o.type?o.showCancelButton=!0:o.showCancelButton=!1,u(o)},u=t=>new Promise(((e,o)=>{const a=s(N,"string"==typeof t?{title:t}:t);l.value=s(a,{show:!0,success:t=>{m(),e(t)},fail:t=>{m(),o(t)}})})),i=r("alert"),c=r("confirm"),p=r("prompt"),m=()=>{l.value!==R&&(l.value.show=!1)};return{show:u,alert:i,confirm:c,prompt:p,close:m}}const G=$(a({name:"ht-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...M,selector:O("")},setup(o){const s=o,{translate:a}=j("message-box"),M=n((()=>`ht-message-box__container ${s.customClass}`)),O=n((()=>`ht-message-box__body ${G.title?"":"is-no-title"} ${"prompt"===G.type?"is-prompt":""}`)),$=(R=s.selector)?`${S}${R}`:S;var R;const A=t($,e(N)),G=l({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),U=n((()=>{const t=g({block:!0},V(G.confirmButtonProps)?k(G.confirmButtonProps,P):{});return t.customClass=`${t.customClass||""} ht-message-box__actions-btn`,t})),F=n((()=>{const t=g({block:!0,type:"info"},V(G.cancelButtonProps)?k(G.cancelButtonProps,P):{});return t.customClass=`${t.customClass||""} ht-message-box__actions-btn`,t}));function H(t){if(("modal"!==t||G.closeOnClickModal)&&("prompt"!==G.type||"confirm"!==t||function(){if(G.inputPattern&&!G.inputPattern.test(String(G.inputValue)))return G.showErr=!0,!1;if("function"==typeof G.inputValidate){if(!G.inputValidate(G.inputValue))return G.showErr=!0,!1}return G.showErr=!1,!0}()))switch(t){case"confirm":G.beforeConfirm?G.beforeConfirm({resolve:e=>{e&&J({action:t,value:G.inputValue})}}):J({action:t,value:G.inputValue});break;case"cancel":L({action:t});break;default:L({action:"modal"})}}function J(t){G.show=!1,z(G.success)&&G.success(t)}function L(t){G.show=!1,z(G.fail)&&G.fail(t)}function Q({value:t}){""!==t?G.inputValue=t:G.showErr=!1}return r((()=>A.value),(t=>{var e;(e=t)&&(G.title=V(e.title)?e.title:"",G.showCancelButton=!!V(e.showCancelButton)&&e.showCancelButton,G.show=e.show,G.closeOnClickModal=e.closeOnClickModal,G.confirmButtonText=e.confirmButtonText,G.cancelButtonText=e.cancelButtonText,G.msg=e.msg,G.type=e.type,G.inputType=e.inputType,G.inputSize=e.inputSize,G.inputValue=e.inputValue,G.inputPlaceholder=e.inputPlaceholder,G.inputPattern=e.inputPattern,G.inputValidate=e.inputValidate,G.success=e.success,G.fail=e.fail,G.beforeConfirm=e.beforeConfirm,G.inputError=e.inputError,G.showErr=e.showErr,G.zIndex=e.zIndex,G.lazyRender=e.lazyRender,G.confirmButtonProps=e.confirmButtonProps,G.cancelButtonProps=e.cancelButtonProps)}),{deep:!0,immediate:!0}),r((()=>G.show),(t=>{!1===!!t&&(G.showErr=!1)}),{deep:!0,immediate:!0}),(t,e)=>{const o=v,s=u(i("ht-input"),E),n=u(i("ht-button"),T),l=u(i("ht-popup"),I);return c(),p(o,null,{default:m((()=>[d(l,{transition:"zoom-in",modelValue:G.show,"onUpdate:modelValue":e[3]||(e[3]=t=>G.show=t),"close-on-click-modal":G.closeOnClickModal,"lazy-render":G.lazyRender,"custom-class":"ht-message-box",onClickModal:e[4]||(e[4]=t=>H("modal")),"z-index":G.zIndex,duration:200},{default:m((()=>[d(o,{class:f(M.value)},{default:m((()=>[d(o,{class:f(O.value)},{default:m((()=>[G.title?(c(),p(o,{key:0,class:"ht-message-box__title"},{default:m((()=>[h(_(G.title),1)])),_:1})):w("",!0),d(o,{class:"ht-message-box__content"},{default:m((()=>["prompt"===G.type?(c(),y(x,{key:0},[d(s,{modelValue:G.inputValue,"onUpdate:modelValue":e[0]||(e[0]=t=>G.inputValue=t),type:G.inputType,size:G.inputSize,placeholder:G.inputPlaceholder,onInput:Q},null,8,["modelValue","type","size","placeholder"]),G.showErr?(c(),p(o,{key:0,class:"ht-message-box__input-error"},{default:m((()=>[h(_(G.inputError||b(a)("inputNoValidate")),1)])),_:1})):w("",!0)],64)):w("",!0),C(t.$slots,"default",{},(()=>[h(_(G.msg),1)]),!0)])),_:3})])),_:3},8,["class"]),d(o,{class:f("ht-message-box__actions "+(G.showCancelButton?"ht-message-box__flex":"ht-message-box__block"))},{default:m((()=>[G.showCancelButton?(c(),p(n,B({key:0},F.value,{onClick:e[1]||(e[1]=t=>H("cancel"))}),{default:m((()=>[h(_(G.cancelButtonText||b(a)("cancel")),1)])),_:1},16)):w("",!0),d(n,B(U.value,{onClick:e[2]||(e[2]=t=>H("confirm"))}),{default:m((()=>[h(_(G.confirmButtonText||b(a)("confirm")),1)])),_:1},16)])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index"])])),_:3})}}}),[["__scopeId","data-v-50455c37"]]);export{G as _,A as u};
