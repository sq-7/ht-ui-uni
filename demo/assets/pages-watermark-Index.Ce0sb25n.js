import{d as e,z as t,r as a,V as l,aY as i,W as s,c as u,v as n,aZ as o,a_ as r,f as d,g as c,w as m,B as g,x as f,p as h,D as p,C as v,X as _,m as y,ay as b,b as $,e as z,k as w,h as x,i as k,t as C,F as j}from"./index-Bl407YMq.js";import{b as V,c as X,m as F,d as I,e as S,_ as L}from"./base64.CiSqhNY6.js";import{_ as W}from"./ht-button.8vkNbh4T.js";import{_ as Y}from"./demo-block.DyA2odLx.js";import{_ as D}from"./ht-badge.DwY2PHaM.js";import{_ as P}from"./ht-loading.DCn6to1m.js";import{_ as A}from"./ht-cell-group.CNK-mXf8.js";import{_ as B}from"./page-wraper.D_DLAzgo.js";import"./useChildren.CidG9Z_9.js";const H=L(e({name:"ht-watermark",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...V,content:X(""),image:X(""),imageHeight:F(100),imageWidth:F(100),gutterX:F(0),gutterY:F(0),width:F(100),height:F(100),fullScreen:I(!0),color:X("#8c8c8c"),size:F(14),fontStyle:X("normal"),fontWeight:S("normal"),fontFamily:X("PingFang SC"),rotate:F(-25),zIndex:F(1100),opacity:F(.5)},setup(e){const $=e;t((()=>$),(()=>{V.value=!0,C.value=($.height+$.gutterY)*k.value,j.value=($.width+$.gutterX)*k.value,b((()=>{I()}))}),{deep:!0});const z=a(`water${l()}`),w=a(""),x=a(i("createOffscreenCanvas")&&Boolean(uni.createOffscreenCanvas)),k=a(s().pixelRatio),C=a(($.height+$.gutterY)*k.value),j=a(($.width+$.gutterX)*k.value),V=a(!0),X=u((()=>{let e="ht-watermark";return $.fullScreen&&(e=`${e} is-fullscreen`),`${e} ${$.customClass}`})),F=u((()=>{const e={opacity:$.opacity,backgroundSize:p($.width+$.gutterX)};return w.value&&(e.backgroundImage=`url('${w.value}')`),`${v(e)};${$.customStyle}`}));function I(){V.value=!1;const{width:e,height:t,color:a,size:l,fontStyle:i,fontWeight:s,fontFamily:u,content:n,rotate:d,gutterX:c,gutterY:m,image:g,imageHeight:f,imageWidth:h}=$;!function(e,t,a,l,i,s,u,n,d,c,m,g,f,h){const p=(t+m)*k.value,v=(e+c)*k.value,_=e*k.value,y=t*k.value,b=l*k.value;!function(e,t,a,l,i,s,u,n,d,c,m,g,f,h){const p=document.createElement("canvas"),v=p.getContext("2d");if(p.setAttribute("width",`${t}px`),p.setAttribute("height",`${e}px`),v)if(g){!async function(e,t,a,l,i,s,u,n,d){e.translate(u/2,n/2),e.rotate(Math.PI/180*Number(s)),t.crossOrigin="anonymous",t.referrerPolicy="no-referrer",o(a)?t.src=a:t.src=r(a,{timestamp:`${(new Date).getTime()}`});t.onload=()=>{e.drawImage(t,-i*k.value/2,-l*k.value/2,i*k.value,l*k.value),e.restore(),w.value=d.toDataURL()}}(v,new Image,g,f,h,i,a,l,p)}else!function(e,t,a,l,i,s,u,n,o,r,d){e.textBaseline="middle",e.textAlign="center",e.translate(a/2,a/2),e.rotate(Math.PI/180*i),e.font=`${n} normal ${o} ${s}px/${l}px ${u}`,e.fillStyle=r,e.fillText(t,0,0),e.restore(),w.value=d.toDataURL()}(v,m,a,l,i,s,u,n,d,c,p);else console.error("无法获取canvas上下文，请确认当前环境是否支持canvas")}(p,v,_,y,d,b,u,i,s,a,n,g,f,h)}(e,t,a,l,i,s,u,n,d,c,m,g,f,h)}return n((()=>{I()})),(e,t)=>{const a=_,l=y;return d(),c(l,{class:h(X.value),style:g(F.value)},{default:m((()=>[!x.value&&V.value?(d(),c(a,{key:0,type:"2d",style:g({height:C.value+"px",width:j.value+"px",visibility:"hidden"}),"canvas-id":z.value,id:z.value},null,8,["style","canvas-id","id"])):f("",!0)])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-54fb3111"]]),O=L(e({__name:"Index",setup(e){const t=a(!1),l=u((()=>t.value?"https://ht-ui-uni.cn/logo.png":""));function i(e){t.value=e}return(e,t)=>{const a=$(z("ht-watermark"),H),s=$(z("ht-button"),W),u=$(z("demo-block"),Y),n=$(z("ht-badge"),D),o=$(z("ht-cell"),P),r=$(z("ht-cell-group"),A),c=$(z("page-wraper"),B),g=y;return d(),w(j,null,[x(a,{image:l.value,width:130,height:140,"image-width":38,content:"ht-ui-uni","image-height":38,opacity:.5},null,8,["image"]),x(g,null,{default:m((()=>[x(c,null,{default:m((()=>[x(u,{title:e.$t("ji-chu-yong-fa-0")},{default:m((()=>[x(s,{onClick:t[0]||(t[0]=e=>i(!1)),plain:""},{default:m((()=>[k(C(e.$t("wen-zi-shui-yin")),1)])),_:1}),x(s,{onClick:t[1]||(t[1]=e=>i(!0)),plain:""},{default:m((()=>[k(C(e.$t("tu-pian-shui-yin")),1)])),_:1})])),_:1},8,["title"]),x(u,{title:e.$t("zhan-shi-xiao-guo")},{default:m((()=>[x(n,{"custom-class":"badge",modelValue:200,max:99},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("pingLun")),1)])),_:1})])),_:1}),x(n,{"custom-class":"badge",modelValue:200,max:10},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("huiFu-0")),1)])),_:1})])),_:1})])),_:1},8,["title"]),x(u,{title:e.$t("ju-bu-shui-yin")},{default:m((()=>[x(a,{opacity:.8,image:"https://ht-ui-uni.cn/logo.png","image-width":38,"image-height":38,"full-screen":!1}),x(n,{"custom-class":"badge",modelValue:12},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("pingLun")),1)])),_:1})])),_:1}),x(n,{"custom-class":"badge",modelValue:3,"bg-color":"pink"},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("huiFu-0")),1)])),_:1})])),_:1}),x(n,{"custom-class":"badge",modelValue:1,type:"primary"},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("pingLun")),1)])),_:1})])),_:1}),x(n,{"custom-class":"badge",modelValue:2,type:"warning"},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("huiFu-0")),1)])),_:1})])),_:1}),x(n,{"custom-class":"badge",modelValue:1,type:"success"},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("pingLun")),1)])),_:1})])),_:1}),x(n,{"custom-class":"badge",modelValue:2,type:"info"},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("huiFu-0")),1)])),_:1})])),_:1}),x(r,{border:""},{default:m((()=>[x(o,{size:"large",title:e.$t("biao-ti-wen-zi-10"),value:"内容"},null,8,["title"]),x(o,{title:e.$t("biao-ti-wen-zi-10"),value:"内容",size:"large",icon:"setting","is-link":""},null,8,["title"]),x(o,{size:"large",title:e.$t("biao-ti-wen-zi-10"),label:e.$t("miaoShuXinXi-0"),value:"内容"},null,8,["title","label"]),x(o,{size:"large",title:e.$t("biao-ti-wen-zi-10"),value:"内容"},null,8,["title"]),x(o,{title:e.$t("biao-ti-wen-zi-10"),value:"内容",size:"large",icon:"setting","is-link":""},null,8,["title"]),x(o,{size:"large",title:e.$t("biao-ti-wen-zi-10"),label:e.$t("miaoShuXinXi-0"),value:"内容"},null,8,["title","label"])])),_:1})])),_:1},8,["title"]),x(u,{title:e.$t("zhan-shi-xiao-guo-0")},{default:m((()=>[x(n,{"custom-class":"badge",modelValue:"new"},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("pingLun")),1)])),_:1})])),_:1}),x(n,{"custom-class":"badge",modelValue:"hot"},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("huiFu-0")),1)])),_:1})])),_:1})])),_:1},8,["title"]),x(u,{title:e.$t("zhan-shi-xiao-guo-1")},{default:m((()=>[x(n,{"custom-class":"badge","is-dot":""},{default:m((()=>[k(C(e.$t("shuJuChaXun")),1)])),_:1}),x(n,{"custom-class":"badge","is-dot":""},{default:m((()=>[x(s,{round:!1,type:"info",size:"small"},{default:m((()=>[k(C(e.$t("huiFu-0")),1)])),_:1})])),_:1})])),_:1},8,["title"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-dd83f13f"]]);export{O as default};
