import{d as e,r as a,V as l,z as u,c as t,v as s,G as n,f as i,g as d,w as o,p as v,i as r,t as c,x as m,h,B as b,K as f,m as _,am as w,I as p,J as g}from"./index-Bl407YMq.js";import{u as y}from"./useTouch.b37GVTmH.js";import{b as x,c as M,d as V,m as $,_ as C}from"./base64.CiSqhNY6.js";const T=C(e({name:"ht-slider",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...x,customMinClass:M(""),customMaxClass:M(""),hideMinMax:V(!1),hideLabel:V(!1),disabled:V(!1),inactiveColor:M("#e5e5e5"),activeColor:M(""),max:$(100),min:$(0),step:$(1),modelValue:{type:[Number,Array],default:0}},emits:["dragstart","dragmove","dragend","update:modelValue"],setup(e,{expose:x,emit:M}){const V=e,$=M,C={startValue:0,deltaX:0,newValue:0},T=a(`sliderId${l()}`),k=y(),I=y(),L=a(!1),N=a(""),S=a(0),j=a(0),X=a(0),G=a(0),z=a(0),A=a(0),B=a(0),D=a(0),E=a(0),H=a(100),J=a(0),K=a(1);u((()=>V.max),(e=>{e<=V.min?(H.value=V.min,J.value=e,console.warn("[wot design] warning(ht-slider): max value must be greater than min value")):H.value=e,de()}),{immediate:!0}),u((()=>V.min),(e=>{e>=V.max?(J.value=V.max,H.value=e,console.warn("[wot design] warning(ht-slider): min value must be less than max value")):J.value=e,de()}),{immediate:!0}),u((()=>V.step),(e=>{e<1?(K.value=1,console.warn("[wot design] warning(ht-slider): step must be greater than 0")):K.value=Math.floor(e)}),{immediate:!0}),u((()=>V.modelValue),(e=>{if(null==e?($("update:modelValue",D.value),console.warn("[wot design] warning(ht-slider): value can nott be null or undefined")):f(e)&&2!==e.length?console.warn("[wot design] warning(ht-slider): value must be dyadic array"):w(e)||f(e)||($("update:modelValue",D.value),console.warn("[wot design] warning(ht-slider): value must be dyadic array Or Number")),f(e)){if(D.value&&f(D.value)&&function(e,a){if(!g(e)||!g(a))return!1;let l=0;return e.forEach(((e,u)=>{e===a[u]&&l++})),2===l}(e,D.value))return;D.value=e,L.value=!0,G.value<=X.value?(te(e[0]),ue(e[1])):(te(e[1]),ue(e[0]))}else{if(e===D.value)return;D.value=e,te(e)}}),{deep:!0,immediate:!0});const{proxy:O}=p(),q=t((()=>`ht-slider ${V.hideLabel?"":"ht-slider__has-label"} ${V.disabled?"ht-slider--disabled":""} ${V.customClass}`)),F=t((()=>""+(V.inactiveColor?"background:"+V.inactiveColor:""))),P=t((()=>`${N.value};${V.activeColor?"background:"+V.activeColor:""}`)),Q=t((()=>`left: ${G.value}%; visibility: ${V.disabled?"hidden":"show"};`)),R=t((()=>`left: ${X.value}%; visibility: ${V.disabled?"hidden":"show"}`));function U(){n(`#${T.value}`,!1,O).then((e=>{z.value=Number(e.width),A.value=Number(e.left)}))}function W(e){const{disabled:a,modelValue:l}=V;a||(k.touchStart(e),B.value=f(l)?G.value<X.value?ne(l[0]):ne(l[1]):ne(l),$("dragstart",{value:D.value}))}function Y(e){const{disabled:a}=V;if(a)return;k.touchMove(e);const l=k.deltaX.value/z.value*(H.value-J.value);E.value=B.value+l,te(E.value),$("dragmove",{value:D.value})}function Z(){V.disabled||$("dragend",{value:D.value})}function ee(e){if(V.disabled)return;const{modelValue:a}=V;I.touchStart(e),C.startValue=G.value<X.value?ne(a[1]):ne(a[0]),$("dragstart",{value:D.value})}function ae(e){if(V.disabled)return;I.touchMove(e);const a=I.deltaX.value/z.value*(H.value-J.value);C.newValue=ne(C.startValue+a),ue(C.newValue),$("dragmove",{value:D.value})}function le(){V.disabled||$("dragend",{value:D.value})}function ue(e){e=ne(e),j.value=e,$("update:modelValue",[Math.min(S.value,j.value),Math.max(S.value,j.value)]),X.value=ie(e),se()}function te(e){const a=ie(e=ne(e));L.value?(S.value=e,G.value=a,$("update:modelValue",[Math.min(S.value,j.value),Math.max(S.value,j.value)]),se()):($("update:modelValue",e),S.value=e,G.value=a,N.value=`width: ${a}%; `)}function se(){const e=G.value<X.value?[G.value,X.value]:[X.value,G.value],a=`width: ${e[1]-e[0]}%;  left: ${e[0]}%`;D.value=S.value<j.value?[S.value,j.value]:[j.value,S.value],N.value=a}function ne(e){return Math.round(Math.max(J.value,Math.min(e,H.value))/K.value)*K.value}function ie(e){return(e-J.value)/(H.value-J.value)*100}function de(){const{modelValue:e}=V;let a=f(e)?G.value<X.value?ne(e[0]):ne(e[1]):ne(e);a=ne(a);const l=ie(a);G.value=l,N.value=`width: ${l}%; `}return s((()=>{U()})),x({initSlider:U}),(e,a)=>{const l=_;return i(),d(l,{class:v(q.value),style:b(e.customStyle),id:T.value},{default:o((()=>[e.hideMinMax?m("",!0):(i(),d(l,{key:0,class:v(`ht-slider__label-min ${e.customMinClass}`)},{default:o((()=>[r(c(J.value),1)])),_:1},8,["class"])),h(l,{class:"ht-slider__bar-wrapper",style:b(F.value)},{default:o((()=>[h(l,{class:"ht-slider__bar",style:b(P.value)},null,8,["style"]),h(l,{class:"ht-slider__button-wrapper",style:b(Q.value),onTouchstart:W,onTouchmove:Y,onTouchend:Z,onTouchcancel:Z},{default:o((()=>[e.hideLabel?m("",!0):(i(),d(l,{key:0,class:"ht-slider__label"},{default:o((()=>[r(c(S.value),1)])),_:1})),h(l,{class:"ht-slider__button"})])),_:1},8,["style"]),L.value?(i(),d(l,{key:0,class:"ht-slider__button-wrapper",style:b(R.value),onTouchstart:ee,onTouchmove:ae,onTouchend:le,onTouchcancel:le},{default:o((()=>[e.hideLabel?m("",!0):(i(),d(l,{key:0,class:"ht-slider__label"},{default:o((()=>[r(c(j.value),1)])),_:1})),h(l,{class:"ht-slider__button"})])),_:1},8,["style"])):m("",!0)])),_:1},8,["style"]),e.hideMinMax?m("",!0):(i(),d(l,{key:1,class:v(`ht-slider__label-max ${e.customMaxClass}`)},{default:o((()=>[r(c(H.value),1)])),_:1},8,["class"]))])),_:1},8,["class","style","id"])}}}),[["__scopeId","data-v-b29f9a53"]]);export{T as _};
