import{b as e,c as a,d as l,m as s,a as c,_ as t}from"./base64.CiSqhNY6.js";import{d as u,r as o,z as r,v as n,c as h,L as d,b as i,e as v,f,g as p,w as m,h as _,A as y,B as C,p as x,i as b,t as g,j as k,x as S,C as V,n as $,m as w,ah as I}from"./index-Bl407YMq.js";import{u as L}from"./useTranslate.C8VGrN03.js";const j=t(u({name:"ht-search",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,customInputClass:a(""),modelValue:a(""),useSuffixSlot:l(!1),placeholder:String,cancelTxt:String,light:l(!1),hideCancel:l(!1),disabled:l(!1),maxlength:s(-1),placeholderLeft:l(!1),focus:l(!1),focusWhenClear:l(!1),placeholderStyle:String,placeholderClass:a("")},emits:["update:modelValue","change","clear","search","focus","blur","cancel"],setup(e,{emit:a}){const l=e,s=a,{translate:t}=L("search"),u=o(!1),j=o(!1),T=o(""),W=o(!0),B=o(!1);r((()=>l.modelValue),(e=>{T.value=e,e&&(j.value=!0)}),{immediate:!0}),r((()=>l.focus),(e=>{if(e){if(l.disabled)return;G()}})),n((()=>{l.focus&&G()}));const z=h((()=>`ht-search  ${l.light?"is-light":""}  ${l.hideCancel?"is-without-cancel":""} ${l.customClass}`)),A=h((()=>{const e={display:""===T.value&&W.value?"flex":"none"};return V(e)}));async function F(e){j.value=e,await d(),u.value=e}async function G(){l.disabled||(await d(100),W.value=!1,F(!0))}function H(e){T.value=e.detail.value,s("update:modelValue",e.detail.value),s("change",{value:e.detail.value})}async function U(){T.value="",B.value=!0,l.focusWhenClear&&(u.value=!1),await d(100),l.focusWhenClear?(W.value=!1,F(!0)):(W.value=!0,F(!1)),s("change",{value:""}),s("update:modelValue",""),s("clear")}function q({detail:{value:e}}){s("search",{value:e})}function D(){B.value?B.value=!1:(W.value=!1,s("focus",{value:T.value}))}function E(){B.value||(W.value=!T.value,j.value=!W.value,u.value=!1,s("blur",{value:T.value}))}function J(){s("cancel",{value:T.value})}return(e,a)=>{const l=i(v("ht-icon"),c),s=$,o=w,r=I;return f(),p(o,{class:x(z.value),style:C(e.customStyle)},{default:m((()=>[_(o,{class:"ht-search__block"},{default:m((()=>[y(e.$slots,"prefix",{},void 0,!0),_(o,{class:"ht-search__field"},{default:m((()=>[e.placeholderLeft?S("",!0):(f(),p(o,{key:0,style:C(A.value),class:"ht-search__cover",onClick:G},{default:m((()=>[_(l,{name:"search","custom-class":"ht-search__search-icon"}),_(s,{class:x(`ht-search__placeholder-txt ${e.placeholderClass}`)},{default:m((()=>[b(g(e.placeholder||k(t)("search")),1)])),_:1},8,["class"])])),_:1},8,["style"])),j.value||T.value||e.placeholderLeft?(f(),p(l,{key:1,name:"search","custom-class":"ht-search__search-left-icon"})):S("",!0),j.value||T.value||e.placeholderLeft?(f(),p(r,{key:2,placeholder:e.placeholder||k(t)("search"),"placeholder-class":`ht-search__placeholder-txt ${e.placeholderClass}`,"placeholder-style":e.placeholderStyle,"confirm-type":"search",modelValue:T.value,"onUpdate:modelValue":a[0]||(a[0]=e=>T.value=e),class:x(["ht-search__input",e.customInputClass]),onFocus:D,onInput:H,onBlur:E,onConfirm:q,disabled:e.disabled,maxlength:e.maxlength,focus:u.value},null,8,["placeholder","placeholder-class","placeholder-style","modelValue","class","disabled","maxlength","focus"])):S("",!0),T.value?(f(),p(l,{key:3,"custom-class":"ht-search__clear ht-search__clear-icon",name:"error-fill",onClick:U})):S("",!0)])),_:1})])),_:3}),e.hideCancel?S("",!0):y(e.$slots,"suffix",{key:0},(()=>[_(o,{class:"ht-search__cancel",onClick:J},{default:m((()=>[b(g(e.cancelTxt||k(t)("cancel")),1)])),_:1})]),!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-a51f2cfb"]]);export{j as _};
