import{d as a,c as e,r as t,z as s,f as l,g as n,w as i,p as o,B as c,A as d,x as r,J as u,C as m,m as h,am as _,ae as b,I as p,an as f,aN as v,v as y,ay as x,b as g,e as w,h as k,k as I,l as $,j as C,F as N,i as S,t as T,D as L,G as j,aA as V,N as z,au as P,aO as H,n as W}from"./index-Bl407YMq.js";import{u as X}from"./ht-loading.DCn6to1m.js";import{b as A,e as G,m as D,d as M,n as O,c as B,_ as E,a as F}from"./base64.CiSqhNY6.js";import{_ as J}from"./ht-badge.DwY2PHaM.js";import{_ as R,a as q}from"./ht-sticky-box.C9kXiERW.js";import{u as K}from"./useTouch.b37GVTmH.js";import{u as Q}from"./useChildren.CidG9Z_9.js";import{u as U}from"./useTranslate.C8VGrN03.js";const Y=Symbol("ht-tabs"),Z={...A,modelValue:G(0),slidableNum:D(6),mapNum:D(10),mapTitle:String,sticky:M(!1),offsetTop:D(0),swipeable:M(!1),autoLineWidth:M(!1),lineWidth:O,lineHeight:O,color:B(""),inactiveColor:B(""),animated:M(!1),duration:D(300),slidable:B("auto")},aa=E(a({name:"ht-tab",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...A,name:O,title:String,disabled:M(!1),lazy:M(!0),badgeProps:Object},setup(a){const f=a,{proxy:v}=p(),{parent:y,index:x}=X(Y),g=e((()=>!!u(y)&&y.state.activeIndex===x.value)),w=t(g.value),k=e((()=>{const a={};return g.value||u(y)&&y.props.animated||(a.display="none"),m(a)})),I=e((()=>!f.lazy||w.value||g.value));return s(g,(a=>{a&&(w.value=!0)})),s((()=>f.name),(a=>{!u(a)||_(a)||b(a)?y&&function(a){const{name:e}=f;if(null==e||""===e)return;y&&y.children.forEach((t=>{t.$.uid!==a.$.uid&&t.name===e&&console.error(`The tab's bound value: ${e} has been used`)}))}(v):console.error("[wot design] error(ht-tab): the type of name should be number or string")}),{deep:!0,immediate:!0}),(a,e)=>{const t=h;return l(),n(t,{class:o(`ht-tab ${a.customClass}`),style:c(a.customStyle)},{default:i((()=>[I.value?(l(),n(t,{key:0,class:o(["ht-tab__body",{"ht-tab__body--inactive":!g.value}]),style:c(k.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])):r("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ef053ad0"]]),ea=E(a({name:"ht-tabs",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:Z,emits:["change","disabled","click","update:modelValue"],setup(a,{expose:t,emit:X}){const A=".ht-tabs__nav-item",G=".ht-tabs__nav-item-text",D=".ht-tabs__nav-container",M=a,O=X,{translate:B}=U("tabs"),E=f({activeIndex:0,lineStyle:"display:none;",useInnerLine:!1,inited:!1,animating:!1,mapShow:!1,scrollLeft:0}),{children:Z,linkChildren:aa}=Q(Y);aa({state:E,props:M});const{proxy:ea}=p(),ta=K(),sa=e((()=>"always"===M.slidable||Z.length>M.slidableNum)),la=e((()=>M.animated?m({left:-100*E.activeIndex+"%","transition-duration":M.duration+"ms","-webkit-transition-duration":M.duration+"ms"}):"")),na=(a,e)=>u(a.name)?a.name:e,ia=(a=0,e=!1,t=!0)=>{0!==Z.length&&(a=ba(a),Z[a].disabled||(E.activeIndex=a,t&&(da(!1===e),ra()),function(){if(!E.inited)return;const a=na(Z[E.activeIndex],E.activeIndex);a!==M.modelValue&&(O("change",{index:E.activeIndex,name:a}),O("update:modelValue",a))}()))},oa=v(ia,100,{leading:!0});function ca(){E.mapShow?(E.animating=!1,setTimeout((()=>{E.mapShow=!1}),300)):(E.mapShow=!0,setTimeout((()=>{E.animating=!0}),100))}async function da(a=!0){if(!E.inited)return;const{autoLineWidth:e,lineWidth:t,lineHeight:s}=M;try{const l={};if(u(t))l.width=L(t);else if(e){const a=await j(G,!0,ea),e=Number(a[E.activeIndex].width);l.width=L(e)}u(s)&&(l.height=L(s),l.borderRadius=`calc(${L(s)} / 2)`);const n=await j(A,!0,ea),i=n[E.activeIndex];let o=n.slice(0,E.activeIndex).reduce(((a,e)=>a+Number(e.width)),0)+Number(i.width)/2;o&&(l.transform=`translateX(${o}px) translateX(-50%)`,a&&(l.transition="width 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);"),E.useInnerLine=!1,E.lineStyle=m(l))}catch(l){console.error("[wot design] error(ht-tabs): update line style failed",l)}}function ra(){E.inited&&Promise.all([j(A,!0,ea),j(D,!1,ea)]).then((([a,e])=>{const t=a[E.activeIndex],s=a.slice(0,E.activeIndex).reduce(((a,e)=>a+e.width),0)-(e.width-Number(t.width))/2;s===E.scrollLeft?E.scrollLeft=s+Math.random()/1e4:E.scrollLeft=s}))}function ua(a){if(void 0===a)return;const{disabled:e}=Z[a],t=na(Z[a],a);e?O("disabled",{index:a,name:t}):(E.mapShow&&ca(),oa(a),O("click",{index:a,name:t}))}function ma(a){M.swipeable&&ta.touchStart(a)}function ha(a){M.swipeable&&ta.touchMove(a)}function _a(){if(!M.swipeable)return;const{direction:a,deltaX:e,offsetX:t}=ta;"horizontal"===a.value&&t.value>=50&&(e.value>0&&0!==E.activeIndex?oa(E.activeIndex-1):e.value<0&&E.activeIndex!==Z.length-1&&oa(E.activeIndex+1))}function ba(a){if(_(a)&&a>=Z.length&&(console.error("[wot design] warning(ht-tabs): the type of tabs' value is Number shouldn't be less than its children"),a=0),b(a)){const e=Z.findIndex((e=>e.name===a));a=-1===e?0:e}return a}return s((()=>M.modelValue),(a=>{_(a)||b(a)||console.error("[wot design] error(ht-tabs): the type of value should be number or string"),""!==a&&u(a)||console.error("[wot design] error(ht-tabs): tabs's value cannot be '' null or undefined"),"number"==typeof a&&a<0&&console.error("[wot design] error(ht-tabs): tabs's value cannot be less than zero")}),{immediate:!0,deep:!0}),s((()=>M.modelValue),(a=>{const e=ba(a);oa(a,!1,e!==E.activeIndex)}),{immediate:!1,deep:!0}),s((()=>Z.length),(()=>{E.inited&&x((()=>{oa(M.modelValue)}))})),s((()=>M.slidableNum),(a=>{H(a,"slidableNum")})),s((()=>M.mapNum),(a=>{H(a,"mapNum")})),y((()=>{E.inited=!0,x((()=>{ia(M.modelValue,!0),E.useInnerLine=!0}))})),t({setActive:oa,scrollIntoView:ra,updateLineStyle:da}),(a,e)=>{const t=W,s=g(w("ht-badge"),J),u=h,m=V,_=g(w("ht-icon"),F),b=g(w("ht-sticky"),R),p=g(w("ht-sticky-box"),q);return a.sticky?(l(),n(p,{key:0},{default:i((()=>[k(u,{class:o(`ht-tabs ${a.customClass} ${sa.value?"is-slide":""} ${a.mapNum<C(Z).length&&0!==a.mapNum?"is-map":""}`),style:c(a.customStyle)},{default:i((()=>[k(b,{"offset-top":a.offsetTop},{default:i((()=>[k(u,{class:"ht-tabs__nav ht-tabs__nav--sticky"},{default:i((()=>[k(u,{class:"ht-tabs__nav--wrap"},{default:i((()=>[k(m,{"scroll-x":sa.value,"scroll-with-animation":"","scroll-left":E.scrollLeft},{default:i((()=>[k(u,{class:"ht-tabs__nav-container"},{default:i((()=>[(l(!0),I(N,null,$(C(Z),((e,d)=>(l(),n(u,{onClick:a=>ua(d),key:d,class:o(`ht-tabs__nav-item  ${E.activeIndex===d?"is-active":""} ${e.disabled?"is-disabled":""}`),style:c(E.activeIndex===d?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(s,z(P({key:0},e.badgeProps)),{default:i((()=>[k(t,{class:"ht-tabs__nav-item-text"},{default:i((()=>[S(T(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(t,{key:1,class:"ht-tabs__nav-item-text"},{default:i((()=>[S(T(e.title),1)])),_:2},1024)),E.activeIndex===d&&E.useInnerLine?(l(),n(u,{key:2,class:"ht-tabs__line ht-tabs__line--inner"})):r("",!0)])),_:2},1032,["onClick","class","style"])))),128)),k(u,{class:"ht-tabs__line",style:c(E.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<C(Z).length&&0!==a.mapNum?(l(),n(u,{key:0,class:"ht-tabs__map"},{default:i((()=>[k(u,{class:o("ht-tabs__map-btn  "+(E.animating?"is-open":"")),onClick:ca},{default:i((()=>[k(u,{class:o("ht-tabs__map-arrow  "+(E.animating?"is-open":""))},{default:i((()=>[k(_,{name:"arrow-down"})])),_:1},8,["class"])])),_:1},8,["class"]),k(u,{class:"ht-tabs__map-header",style:c(`${E.mapShow?"":"display:none;"}  ${E.animating?"opacity:1;":""}`)},{default:i((()=>[S(T(a.mapTitle||C(B)("all")),1)])),_:1},8,["style"]),k(u,{class:o("ht-tabs__map-body  "+(E.animating?"is-open":"")),style:c(E.mapShow?"":"display:none")},{default:i((()=>[(l(!0),I(N,null,$(C(Z),((e,t)=>(l(),n(u,{class:"ht-tabs__map-nav-item",key:t,onClick:a=>ua(t)},{default:i((()=>[k(u,{class:o(`ht-tabs__map-nav-btn ${E.activeIndex===t?"is-active":""}  ${e.disabled?"is-disabled":""}`),style:c(E.activeIndex===t?a.color?"color:"+a.color+";border-color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[S(T(e.title),1)])),_:2},1032,["class","style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):r("",!0)])),_:1})])),_:1},8,["offset-top"]),k(u,{class:"ht-tabs__container",onTouchstart:ma,onTouchmove:ha,onTouchend:_a,onTouchcancel:_a},{default:i((()=>[k(u,{class:o(["ht-tabs__body",a.animated?"is-animated":""]),style:c(la.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),k(u,{class:"ht-tabs__mask",style:c(`${E.mapShow?"":"display:none;"} ${E.animating?"opacity:1;":""}`),onClick:ca},null,8,["style"])])),_:3},8,["class","style"])])),_:3})):(l(),n(u,{key:1,class:o(`ht-tabs ${a.customClass} ${sa.value?"is-slide":""} ${a.mapNum<C(Z).length&&0!==a.mapNum?"is-map":""}`)},{default:i((()=>[k(u,{class:"ht-tabs__nav"},{default:i((()=>[k(u,{class:"ht-tabs__nav--wrap"},{default:i((()=>[k(m,{"scroll-x":sa.value,"scroll-with-animation":"","scroll-left":E.scrollLeft},{default:i((()=>[k(u,{class:"ht-tabs__nav-container"},{default:i((()=>[(l(!0),I(N,null,$(C(Z),((e,d)=>(l(),n(u,{onClick:a=>ua(d),key:d,class:o(`ht-tabs__nav-item ${E.activeIndex===d?"is-active":""} ${e.disabled?"is-disabled":""}`),style:c(E.activeIndex===d?a.color?"color:"+a.color:"":a.inactiveColor?"color:"+a.inactiveColor:"")},{default:i((()=>[e.badgeProps?(l(),n(s,P({key:0,"custom-class":"ht-tabs__nav-item-badge"},e.badgeProps),{default:i((()=>[k(t,{class:"ht-tabs__nav-item-text"},{default:i((()=>[S(T(e.title),1)])),_:2},1024)])),_:2},1040)):(l(),n(t,{key:1,class:"ht-tabs__nav-item-text"},{default:i((()=>[S(T(e.title),1)])),_:2},1024)),E.activeIndex===d&&E.useInnerLine?(l(),n(u,{key:2,class:"ht-tabs__line ht-tabs__line--inner"})):r("",!0)])),_:2},1032,["onClick","class","style"])))),128)),k(u,{class:"ht-tabs__line",style:c(E.lineStyle)},null,8,["style"])])),_:1})])),_:1},8,["scroll-x","scroll-left"])])),_:1}),a.mapNum<C(Z).length&&0!==a.mapNum?(l(),n(u,{key:0,class:"ht-tabs__map"},{default:i((()=>[k(u,{class:"ht-tabs__map-btn",onClick:ca},{default:i((()=>[k(u,{class:o("ht-tabs__map-arrow "+(E.animating?"is-open":""))},{default:i((()=>[k(_,{name:"arrow-down"})])),_:1},8,["class"])])),_:1}),k(u,{class:"ht-tabs__map-header",style:c(`${E.mapShow?"":"display:none;"}  ${E.animating?"opacity:1;":""}`)},{default:i((()=>[S(T(a.mapTitle||C(B)("all")),1)])),_:1},8,["style"]),k(u,{class:o("ht-tabs__map-body "+(E.animating?"is-open":"")),style:c(E.mapShow?"":"display:none")},{default:i((()=>[(l(!0),I(N,null,$(C(Z),((a,e)=>(l(),n(u,{class:"ht-tabs__map-nav-item",key:e,onClick:a=>ua(e)},{default:i((()=>[k(u,{class:o(`ht-tabs__map-nav-btn ${E.activeIndex===e?"is-active":""}  ${a.disabled?"is-disabled":""}`)},{default:i((()=>[S(T(a.title),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["class","style"])])),_:1})):r("",!0)])),_:1}),k(u,{class:"ht-tabs__container",onTouchstart:ma,onTouchmove:ha,onTouchend:_a,onTouchcancel:_a},{default:i((()=>[k(u,{class:o(["ht-tabs__body",a.animated?"is-animated":""]),style:c(la.value)},{default:i((()=>[d(a.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"])])),_:3}),k(u,{class:"ht-tabs__mask",style:c(`${E.mapShow?"":"display:none;"}  ${E.animating?"opacity:1":""}`),onClick:ca},null,8,["style"])])),_:3},8,["class"]))}}}),[["__scopeId","data-v-a75ee480"]]);export{aa as _,ea as a};
