import{d as a,r as t,c as e,z as s,a4 as l,W as o,f as n,g as u,w as r,h as i,p as h,A as c,H as d,B as m,D as g,C as v,b9 as f,m as p,aA as _,S as b,b as j,e as w,k as y,F as $,l as x,i as I,t as T,j as z}from"./index-Bl407YMq.js";import{a as A,b as C,_ as B}from"./page-wraper.D_DLAzgo.js";import{_ as D}from"./ht-loading.DCn6to1m.js";import{_ as H}from"./ht-cell-group.CNK-mXf8.js";import{b as M,m as S,g as k,d as P,t as V,e as Y,_ as F}from"./base64.CiSqhNY6.js";import{u as U}from"./useTouch.b37GVTmH.js";import{_ as q,a as G}from"./ht-tabs.BaQr-CzC.js";import"./useChildren.CidG9Z_9.js";import"./ht-badge.DwY2PHaM.js";import"./ht-sticky-box.C9kXiERW.js";import"./ht-resize.xwGoC66W.js";import"./useTranslate.C8VGrN03.js";const O=F(a({name:"ht-floating-panel",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...M,height:S(0),anchors:k(),safeAreaInsetBottom:P(!1),showScrollbar:V,duration:Y(300),contentDraggable:V},emits:["update:height","height-change"],setup(a,{emit:b}){const j=U(),w=a,y=b,$=t(w.height);let x;const I=t(0),T=t(!1),z=e((()=>({min:w.anchors[0]?w.anchors[0]:100,max:w.anchors[w.anchors.length-1]?w.anchors[w.anchors.length-1]:Math.round(.6*I.value)}))),A=e((()=>w.anchors.length>=2?w.anchors:[z.value.min,z.value.max])),C=e((()=>{const a={height:g(z.value.max),transform:`translateY(calc(100% + ${g(-$.value)}))`,transition:T.value?"none":`transform ${w.duration}ms cubic-bezier(0.18, 0.89, 0.32, 1.28)`};return`${v(a)};${w.customStyle}`})),B=a=>{$.value=a,y("update:height",a)},D=a=>{j.touchStart(a),T.value=!0,x=-$.value},H=a=>{if("content"==a.currentTarget.dataset.id&&!w.contentDraggable)return;j.touchMove(a);const t=j.deltaY.value+x;B(-S(t))},M=()=>{T.value=!1,B(f(A.value,$.value)),$.value!==-x&&y("height-change",{height:$.value})},S=a=>{const t=Math.abs(a),{min:e,max:s}=z.value;return t>s?-(s+.2*(t-s)):t<e?-(e-.2*(e-t)):a};return s((()=>w.height),(a=>{$.value=a})),s(z,(()=>{B(f(A.value,$.value))}),{immediate:!0}),l((()=>{const{windowHeight:a}=o();I.value=a})),(a,t)=>{const e=p,s=_;return n(),u(e,{class:h(`ht-floating-panel ${a.customClass} ${a.safeAreaInsetBottom?"is-safe":""}`),style:m(C.value),onTouchstartPassive:D,onTouchmovePassive:H,onTouchend:M,onTouchcancel:M},{default:r((()=>[i(e,{class:h("ht-floating-panel__header")},{default:r((()=>[i(e,{class:h("ht-floating-panel__header-bar")})])),_:1}),i(s,{class:h("ht-floating-panel__content"),"data-id":"content","show-scrollbar":a.showScrollbar,"scroll-y":"",onTouchmove:d(H,["stop","prevent"])},{default:r((()=>[c(a.$slots,"default",{},void 0,!0)])),_:3},8,["show-scrollbar"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-cc32e4c9"]]),W=F(a({__name:"Index",setup(a){const{show:e}=A(),s=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],l=t(0),u=t(0),h=t(0),c=t([]),d=({height:a})=>{e(g(a))};return b((()=>{h.value=o().windowHeight,c.value=[100,Math.round(.4*h.value),Math.round(.7*h.value)],u.value=c.value[1]})),(a,t)=>{const e=j(w("ht-toast"),C),o=j(w("ht-cell"),D),h=j(w("ht-cell-group"),H),m=j(w("ht-floating-panel"),O),v=j(w("ht-tab"),q),f=p,_=j(w("ht-tabs"),G),b=j(w("page-wraper"),B);return n(),y($,null,[i(e),i(f,{class:"floating-panel"},{default:r((()=>[i(b,null,{default:r((()=>[i(_,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=a=>l.value=a)},{default:r((()=>[i(v,{title:a.$t("ji-chu-yong-fa-1")},{default:r((()=>[i(m,{safeAreaInsetBottom:""},{default:r((()=>[i(h,{border:""},{default:r((()=>[(n(),y($,null,x(s,(a=>i(o,{key:a,title:a},null,8,["title"]))),64))])),_:1})])),_:1})])),_:1},8,["title"]),i(v,{title:a.$t("zi-ding-yi-mao-dian-0")},{default:r((()=>[i(m,{height:u.value,"onUpdate:height":t[0]||(t[0]=a=>u.value=a),anchors:c.value,safeAreaInsetBottom:"",onHeightChange:d},{default:r((()=>[i(f,{class:"inner-content"},{default:r((()=>[I(T(a.$t('"zi-ding-yi-mao-dian"'))+" "+T(c.value.map(z(g)))+" - "+T(z(g)(u.value.toFixed(0))),1)])),_:1})])),_:1},8,["height","anchors"])])),_:1},8,["title"]),i(v,{title:a.$t("jin-tou-bu-tuo-zhuai-0")},{default:r((()=>[i(m,{contentDraggable:!1},{default:r((()=>[i(f,{class:"inner-content"},{default:r((()=>[I(T(a.$t("nei-rong-qu-bu-ke-yi-tuo-zhuai")),1)])),_:1})])),_:1})])),_:1},8,["title"])])),_:1},8,["modelValue"])])),_:1})])),_:1})],64)}}}),[["__scopeId","data-v-c0dcfea3"]]);export{W as default};
