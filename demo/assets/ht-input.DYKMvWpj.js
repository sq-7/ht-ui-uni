import{b as e,c as l,m as a,d as s,e as o,g as t,a as n,_ as r}from"./base64.CiSqhNY6.js";import{d as i,at as u,r as c,z as d,c as p,J as f,aw as h,b as m,e as y,f as g,g as v,w as _,p as b,B as x,A as k,x as w,h as $,k as C,i as S,t as I,F as V,C as j,L as W,m as E,ah as P,n as T}from"./index-Bl407YMq.js";import{f as q,u as B,F as L}from"./ht-loading.DCn6to1m.js";import{u as z}from"./useTranslate.C8VGrN03.js";const A=r(i({name:"ht-input",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,customInputClass:l(""),customLabelClass:l(""),placeholder:String,placeholderStyle:String,placeholderClass:l(""),cursorSpacing:a(0),cursor:a(-1),selectionStart:a(-1),selectionEnd:a(-1),adjustPosition:s(!0),holdKeyboard:s(!1),confirmType:l("done"),confirmHold:s(!1),focus:s(!1),type:l("text"),maxlength:{type:Number,default:-1},disabled:s(!1),alwaysEmbed:s(!1),alignRight:s(!1),modelValue:o(""),showPassword:s(!1),clearable:s(!1),readonly:s(!1),prefixIcon:String,suffixIcon:String,showWordLimit:s(!1),label:String,labelWidth:l(""),size:String,error:s(!1),center:s(!1),noBorder:s(!1),required:s(!1),prop:String,rules:t(),clearTrigger:l("always"),focusWhenClear:s(!0),ignoreCompositionEvent:s(!0),inputmode:l("text")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","clicksuffixicon","clickprefixicon","click"],setup(e,{emit:l}){const a=e,s=l,o=u(),{translate:t}=z("input"),r=c(!1),i=c(!1),A=c(!1),F=c(!1),H=c(function(){const e=function(e){const{maxlength:l}=a;if(f(l)&&-1!==l&&String(e).length>l)return e.toString().slice(0,l);return e}(a.modelValue);l=e,o=a.modelValue,h(String(l),String(o))||s("update:modelValue",e);var l,o;return e}()),K=q();d((()=>a.focus),(e=>{A.value=e}),{immediate:!0,deep:!0}),d((()=>a.modelValue),(e=>{H.value=f(e)?String(e):""}));const{parent:M}=B(L),O=p((()=>f(a.placeholder)?a.placeholder:t("placeholder"))),R=p((()=>{const{disabled:e,readonly:l,clearable:s,clearTrigger:o}=a;return!(!s||l||e||!H.value||!("always"===o||"focus"===a.clearTrigger&&F.value))})),G=p((()=>{const{disabled:e,readonly:l,maxlength:s,showWordLimit:o}=a;return Boolean(!e&&!l&&f(s)&&s>-1&&o)})),J=p((()=>M&&a.prop&&M.errorMessages&&M.errorMessages[a.prop]?M.errorMessages[a.prop]:"")),N=p((()=>{let e=!1;if(M&&M.props.rules){const l=M.props.rules;for(const s in l)Object.prototype.hasOwnProperty.call(l,s)&&s===a.prop&&Array.isArray(l[s])&&(e=l[s].some((e=>e.required)))}return a.required||a.rules.some((e=>e.required))||e})),U=p((()=>`ht-input  ${a.label||o.label?"is-cell":""} ${a.center?"is-center":""} ${K.border.value?"is-border":""} ${a.size?"is-"+a.size:""} ${a.error?"is-error":""} ${a.disabled?"is-disabled":""}  ${H.value&&String(H.value).length>0?"is-not-empty":""}  ${a.noBorder?"is-no-border":""} ${a.customClass}`)),D=p((()=>`ht-input__label ${a.customLabelClass} ${N.value?"is-required":""}`)),Q=p((()=>`ht-input__placeholder  ${a.placeholderClass}`)),X=p((()=>a.labelWidth?j({"min-width":a.labelWidth,"max-width":a.labelWidth}):""));function Y(){r.value=!r.value}async function Z(){i.value=!0,F.value=!1,H.value="",a.focusWhenClear&&(A.value=!1),await W(),a.focusWhenClear&&(A.value=!0,F.value=!0),s("update:modelValue",H.value),s("clear")}async function ee(){await W(150),i.value?i.value=!1:(F.value=!1,s("blur",{value:H.value}))}function le({detail:e}){F.value=!0,s("focus",e)}function ae({detail:e}){s("update:modelValue",H.value),s("input",e)}function se({detail:e}){s("keyboardheightchange",e)}function oe({detail:e}){s("confirm",e)}function te(){s("clicksuffixicon")}function ne(){s("clickprefixicon")}function re(e){s("click",e)}return(e,l)=>{const s=m(y("ht-icon"),n),o=E,t=P,i=T;return g(),v(o,{class:b(U.value),style:x(e.customStyle),onClick:re},{default:_((()=>[e.label||e.$slots.label?(g(),v(o,{key:0,class:b(D.value),style:x(X.value)},{default:_((()=>[e.prefixIcon||e.$slots.prefix?(g(),v(o,{key:0,class:"ht-input__prefix"},{default:_((()=>[e.prefixIcon&&!e.$slots.prefix?(g(),v(s,{key:0,"custom-class":"ht-input__icon",name:e.prefixIcon,onClick:ne},null,8,["name"])):k(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):w("",!0),$(o,{class:"ht-input__label-inner"},{default:_((()=>[e.label&&!e.$slots.label?(g(),C(V,{key:0},[S(I(e.label),1)],64)):k(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):w("",!0),$(o,{class:"ht-input__body"},{default:_((()=>[$(o,{class:"ht-input__value"},{default:_((()=>[!e.prefixIcon&&!e.$slots.prefix||e.label?w("",!0):(g(),v(o,{key:0,class:"ht-input__prefix"},{default:_((()=>[e.prefixIcon&&!e.$slots.prefix?(g(),v(s,{key:0,"custom-class":"ht-input__icon",name:e.prefixIcon,onClick:ne},null,8,["name"])):k(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})),$(t,{class:b(["ht-input__inner",e.prefixIcon?"ht-input__inner--prefix":"",G.value?"ht-input__inner--count":"",e.alignRight?"is-align-right":"",e.customInputClass]),type:e.type,password:e.showPassword&&!r.value,modelValue:H.value,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value=e),placeholder:O.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:A.value,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,cursor:e.cursor,"cursor-spacing":e.cursorSpacing,"placeholder-style":e.placeholderStyle,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"always-embed":e.alwaysEmbed,"placeholder-class":Q.value,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:ae,onFocus:le,onBlur:ee,onConfirm:oe,onKeyboardheightchange:se},null,8,["class","type","password","modelValue","placeholder","disabled","maxlength","focus","confirm-type","confirm-hold","cursor","cursor-spacing","placeholder-style","selection-start","selection-end","adjust-position","hold-keyboard","always-embed","placeholder-class","ignoreCompositionEvent","inputmode"]),a.readonly?(g(),v(o,{key:1,class:"ht-input__readonly-mask"})):w("",!0),R.value||e.showPassword||e.suffixIcon||G.value||e.$slots.suffix?(g(),v(o,{key:2,class:"ht-input__suffix"},{default:_((()=>[R.value?(g(),v(s,{key:0,"custom-class":"ht-input__clear",name:"error-fill",onClick:Z})):w("",!0),e.showPassword?(g(),v(s,{key:1,"custom-class":"ht-input__icon",name:r.value?"view":"eye-close",onClick:Y},null,8,["name"])):w("",!0),G.value?(g(),v(o,{key:2,class:"ht-input__count"},{default:_((()=>[$(i,{class:b([H.value&&String(H.value).length>0?"ht-input__count-current":"",String(H.value).length>e.maxlength?"is-error":""])},{default:_((()=>[S(I(String(H.value).length),1)])),_:1},8,["class"]),S(" /"+I(e.maxlength),1)])),_:1})):w("",!0),e.suffixIcon&&!e.$slots.suffix?(g(),v(s,{key:3,"custom-class":"ht-input__icon",name:e.suffixIcon,onClick:te},null,8,["name"])):k(e.$slots,"suffix",{key:4},void 0,!0)])),_:3})):w("",!0)])),_:3}),J.value?(g(),v(o,{key:0,class:"ht-input__error-message"},{default:_((()=>[S(I(J.value),1)])),_:1})):w("",!0)])),_:3})])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-6ab9edf3"]]);export{A as _};
