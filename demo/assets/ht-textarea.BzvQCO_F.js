import{b as e,c as a,e as l,d as s,m as t,g as o,a as r,_ as i}from"./base64.CiSqhNY6.js";import{d as n,at as u,c,r as d,z as h,a4 as p,b as m,e as f,f as g,g as v,w as b,p as x,B as y,A as _,x as $,h as C,i as k,t as w,J as S,C as T,L as V,m as W,n as j,ax as B}from"./index-Bl407YMq.js";import{f as I,u as L,F as E}from"./ht-loading.DCn6to1m.js";import{u as H}from"./useTranslate.C8VGrN03.js";const P=i(n({name:"ht-textarea",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...e,customTextareaContainerClass:a(""),customTextareaClass:a(""),customLabelClass:a(""),modelValue:l(""),placeholder:String,placeholderStyle:String,placeholderClass:a(""),disabled:s(!1),maxlength:t(-1),autoFocus:s(!1),focus:s(!1),autoHeight:s(!1),fixed:s(!1),cursorSpacing:t(0),cursor:t(-1),confirmType:String,confirmHold:s(!1),showConfirmBar:s(!0),selectionStart:t(-1),selectionEnd:t(-1),adjustPosition:s(!0),disableDefaultPadding:s(!1),holdKeyboard:s(!1),showPassword:s(!1),clearable:s(!1),readonly:s(!1),prefixIcon:String,showWordLimit:s(!1),label:String,labelWidth:a(""),size:String,error:s(!1),center:s(!1),noBorder:s(!1),required:s(!1),prop:a(""),rules:o(),clearTrigger:a("always"),focusWhenClear:s(!0),ignoreCompositionEvent:s(!0),inputmode:a("text")},emits:["update:modelValue","clear","blur","focus","input","keyboardheightchange","confirm","linechange","clickprefixicon","click"],setup(e,{emit:a}){const{translate:l}=H("textarea"),s=e,t=a,o=u(),i=c((()=>S(s.placeholder)?s.placeholder:l("placeholder"))),n=d(!1),P=d(!1),q=d(!1),z=d(""),A=I();h((()=>s.focus),(e=>{P.value=e}),{immediate:!0,deep:!0}),h((()=>s.modelValue),(e=>{z.value=S(e)?String(e):""}),{immediate:!0,deep:!0});const{parent:F}=L(E),K=c((()=>{const{disabled:e,readonly:a,clearable:l,clearTrigger:t}=s;return!(!l||a||e||!z.value||!("always"===t||"focus"===s.clearTrigger&&q.value))})),M=c((()=>{const{disabled:e,readonly:a,maxlength:l,showWordLimit:t}=s;return Boolean(!e&&!a&&S(l)&&l>-1&&t)})),D=c((()=>F&&s.prop&&F.errorMessages&&F.errorMessages[s.prop]?F.errorMessages[s.prop]:"")),O=c((()=>{let e=!1;if(F&&F.props.rules){const a=F.props.rules;for(const l in a)Object.prototype.hasOwnProperty.call(a,l)&&l===s.prop&&Array.isArray(a[l])&&(e=a[l].some((e=>e.required)))}return s.required||s.rules.some((e=>e.required))||e})),G=c((()=>Array.from(String(X(s.modelValue)||"")).length)),J=c((()=>`ht-textarea   ${s.label||o.label?"is-cell":""} ${s.center?"is-center":""} ${A.border.value?"is-border":""} ${s.size?"is-"+s.size:""} ${s.error?"is-error":""} ${s.disabled?"is-disabled":""} ${s.autoHeight?"is-auto-height":""} ${G.value>0?"is-not-empty":""}  ${s.noBorder?"is-no-border":""} ${s.customClass}`)),U=c((()=>`ht-textarea__label ${s.customLabelClass} ${O.value?"is-required":""}`)),N=c((()=>`ht-textarea__placeholder  ${s.placeholderClass}`)),Q=c((()=>`${G.value>0?"ht-textarea__count-current":""} ${G.value>s.maxlength?"is-error":""}`)),R=c((()=>s.labelWidth?T({"min-width":s.labelWidth,"max-width":s.labelWidth}):""));function X(e){const{maxlength:a,showWordLimit:l}=s;return l&&-1!==a&&String(e).length>a?e.toString().substring(0,a):`${e}`}async function Y(){n.value=!0,q.value=!1,z.value="",s.focusWhenClear&&(P.value=!1),await V(),s.focusWhenClear&&(P.value=!0,q.value=!0),t("update:modelValue",z.value),t("clear")}async function Z({detail:e}){await V(150),n.value?n.value=!1:(q.value=!1,t("blur",{value:z.value,cursor:e.cursor?e.cursor:null}))}function ee({detail:e}){q.value=!0,t("focus",e)}function ae({detail:e}){z.value=X(z.value),t("update:modelValue",z.value),t("input",e)}function le({detail:e}){t("keyboardheightchange",e)}function se({detail:e}){t("confirm",e)}function te({detail:e}){t("linechange",e)}function oe(){t("clickprefixicon")}return p((()=>{z.value=X(z.value),t("update:modelValue",z.value)})),(e,a)=>{const l=m(f("ht-icon"),r),t=W,o=j,n=B;return g(),v(t,{class:x(J.value),style:y(e.customStyle)},{default:b((()=>[e.label||e.$slots.label?(g(),v(t,{key:0,class:x(U.value),style:y(R.value)},{default:b((()=>[e.prefixIcon||e.$slots.prefix?(g(),v(t,{key:0,class:"ht-textarea__prefix"},{default:b((()=>[e.prefixIcon&&!e.$slots.prefix?(g(),v(l,{key:0,"custom-class":"ht-textarea__icon",name:e.prefixIcon,onClick:oe},null,8,["name"])):_(e.$slots,"prefix",{key:1},void 0,!0)])),_:3})):$("",!0),C(t,{class:"ht-textarea__label-inner"},{default:b((()=>[e.label&&!e.$slots.label?(g(),v(o,{key:0},{default:b((()=>[k(w(e.label),1)])),_:1})):_(e.$slots,"label",{key:1},void 0,!0)])),_:3})])),_:3},8,["class","style"])):$("",!0),C(t,{class:x(`ht-textarea__value ${K.value?"is-suffix":""} ${e.customTextareaContainerClass} ${M.value?"is-show-limit":""}`)},{default:b((()=>[C(n,{class:x(`ht-textarea__inner ${e.customTextareaClass}`),modelValue:z.value,"onUpdate:modelValue":a[0]||(a[0]=e=>z.value=e),"show-count":!1,placeholder:i.value,disabled:e.disabled||e.readonly,maxlength:e.maxlength,focus:P.value,"auto-focus":e.autoFocus,"placeholder-style":e.placeholderStyle,"placeholder-class":N.value,"auto-height":e.autoHeight,"cursor-spacing":e.cursorSpacing,fixed:e.fixed,cursor:e.cursor,"show-confirm-bar":e.showConfirmBar,"selection-start":e.selectionStart,"selection-end":e.selectionEnd,"adjust-position":e.adjustPosition,"hold-keyboard":e.holdKeyboard,"confirm-type":e.confirmType,"confirm-hold":e.confirmHold,"disable-default-padding":e.disableDefaultPadding,ignoreCompositionEvent:e.ignoreCompositionEvent,inputmode:e.inputmode,onInput:ae,onFocus:ee,onBlur:Z,onConfirm:se,onLinechange:te,onKeyboardheightchange:le},null,8,["class","modelValue","placeholder","disabled","maxlength","focus","auto-focus","placeholder-style","placeholder-class","auto-height","cursor-spacing","fixed","cursor","show-confirm-bar","selection-start","selection-end","adjust-position","hold-keyboard","confirm-type","confirm-hold","disable-default-padding","ignoreCompositionEvent","inputmode"]),D.value?(g(),v(t,{key:0,class:"ht-textarea__error-message"},{default:b((()=>[k(w(D.value),1)])),_:1})):$("",!0),s.readonly?(g(),v(t,{key:1,class:"ht-textarea__readonly-mask"})):$("",!0),C(t,{class:"ht-textarea__suffix"},{default:b((()=>[K.value?(g(),v(l,{key:0,"custom-class":"ht-textarea__clear",name:"error-fill",onClick:Y})):$("",!0),M.value?(g(),v(t,{key:1,class:"ht-textarea__count"},{default:b((()=>[C(o,{class:x(Q.value)},{default:b((()=>[k(w(G.value),1)])),_:1},8,["class"]),k(" /"+w(e.maxlength),1)])),_:1})):$("",!0)])),_:1})])),_:1},8,["class"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-8fada50a"]]);export{P as _};
