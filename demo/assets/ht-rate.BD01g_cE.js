import{b as a,m as e,d as t,c as s,a as l,_ as o}from"./base64.CiSqhNY6.js";import{d as r,r as n,c as i,z as c,b as u,e as d,f as m,g as f,w as h,k as y,l as p,F as g,p as v,B as b,G as _,m as C,h as k,H as x,x as z,I as w}from"./index-Bl407YMq.js";const I=o(r({name:"ht-rate",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...a,num:e(5),modelValue:{type:[String,Number,null],default:null},readonly:t(!1),size:s("16px"),space:s("4px"),color:s("#E8E8E8"),activeColor:{type:[String,Array],default:"linear-gradient(180deg, rgba(255,238,0,1) 0%,rgba(250,176,21,1) 100%)"},icon:s("star-on"),activeIcon:s("star-on"),disabled:t(!1),disabledColor:s("linear-gradient(315deg, rgba(177,177,177,1) 0%,rgba(199,199,199,1) 100%)"),allowHalf:t(!1)},emits:["update:modelValue","change"],setup(a,{emit:e}){const{proxy:t}=w(),s=a,o=e,r=n([]),I=n(""),A=i((()=>`background:${s.color};`)),H=i((()=>`background:${s.disabled?s.disabledColor:I.value};`));c((()=>s.activeColor),(a=>{Array.isArray(a)&&!a.length&&console.error("activeColor cannot be an empty array"),E()}),{immediate:!0,deep:!0}),c([()=>s.num,()=>s.modelValue],(()=>{!function(){const{modelValue:a,num:e,allowHalf:t}=s;if(null===a||!e)return;if("number"!=typeof a)return void console.error("[Wot Design] error(ht-rate): the value of ht-rate should be a number");const l=[],o=Math.floor(a);for(let s=0;s<e;s++)s<o?l.push("100%"):s===o&&t&&a%1!=0?l.push("50%"):l.push("0");r.value=l,E()}()}),{immediate:!0,deep:!0});const V=a=>"0"!==a;function E(){const{activeColor:a,modelValue:e,num:t}=s;let l="";l=Array.isArray(a)&&a.length?Number(e)<=.6*t||!a[1]?a[0]:a[1]:a,I.value=l}function S(a,e){if(s.readonly||s.disabled)return;const t=e?a+.5:a+1;o("update:modelValue",t),o("change",{value:t})}async function $(a){const{clientX:e}=a.touches[0],l=await _(".ht-rate__item",!0,t),o=Array.from(l).findIndex((a=>e>=a.left&&e<=a.right));if(-1!==o){const a=l[o],t=a.width,r=s.allowHalf&&e-a.left<t/2;(r?o+.5:o+1)>=.5&&S(o,r)}}return(a,e)=>{const t=u(d("ht-icon"),l),o=C;return m(),f(o,{class:v(`ht-rate ${a.customClass}`),style:b(a.customStyle),onTouchmove:$},{default:h((()=>[(m(!0),y(g,null,p(r.value,((e,l)=>(m(),f(o,{key:l,"data-index":l,style:b({"margin-right":l==r.value.length-1?0:a.space}),class:"ht-rate__item"},{default:h((()=>[k(t,{"custom-class":"ht-rate__item-star",name:V(e)?a.activeIcon:a.icon,size:a.size,"custom-style":"100%"===e?H.value:A.value,onClick:a=>S(l,!1)},null,8,["name","size","custom-style","onClick"]),s.allowHalf?(m(),f(o,{key:0,class:"ht-rate__item-half",onClick:x((a=>S(l,!0)),["stop"])},{default:h((()=>[k(t,{"custom-class":"ht-rate__item-star",name:V(e)?a.activeIcon:a.icon,size:a.size,"custom-style":"0"!==e?H.value:A.value},null,8,["name","size","custom-style"])])),_:2},1032,["onClick"])):z("",!0)])),_:2},1032,["data-index","style"])))),128))])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-fc031ff7"]]);export{I as _};
