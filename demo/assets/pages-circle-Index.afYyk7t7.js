import{u as e,_ as l}from"./ht-message-box.CCMhGwSe.js";import{d as t,r as a,V as o,c as s,z as u,a4 as i,W as c,v as r,a2 as n,f as d,g as m,w as v,h as p,B as h,A as f,i as V,t as _,p as y,D as g,C as x,Z as k,M as b,X as j,m as w,n as z,I as $,u as C,b as S,e as F}from"./index-Bl407YMq.js";import{b as I,m as L,c as M,d as U,_ as P}from"./base64.CiSqhNY6.js";import{_ as T}from"./demo-block.DyA2odLx.js";import{_ as W}from"./ht-button.8vkNbh4T.js";import{_ as E}from"./page-wraper.D_DLAzgo.js";import"./ht-input.DYKMvWpj.js";import"./ht-loading.DCn6to1m.js";import"./useTranslate.C8VGrN03.js";const G=P(t({name:"ht-circle",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...I,modelValue:L(0),size:L(100),color:{type:[String,Object],default:"#4d80f0"},layerColor:M("#EBEEF5"),fill:String,speed:L(50),text:String,strokeWidth:L(10),strokeLinecap:M("round"),clockwise:U(!0)},setup(e){const l=2*Math.PI,t=-Math.PI/2,C=1,S=e,F=a(""),I=a(0),L=a(null),M=a(1),U=a(`ht-circle${o()}`);let P=null;const T=s((()=>S.size)),W=s((()=>S.strokeWidth)),E=s((()=>{const e={width:g(S.size),height:g(S.size)};return`${x(e)};`}));u((()=>S.modelValue),(()=>{!function(){if(S.speed<=0||S.speed>1e3)return void B(S.modelValue);R(),I.value=I.value||0;const e=()=>{L.value=setTimeout((()=>{I.value!==S.modelValue?(Math.abs(I.value-S.modelValue)<C?I.value=S.modelValue:I.value<S.modelValue?I.value+=C:I.value-=C,B(I.value),e()):R()}),1e3/S.speed)};e()}()}),{immediate:!0}),u((()=>S.size),(()=>{let e=setTimeout((()=>{B(I.value),clearTimeout(e)}),50)}),{immediate:!1}),u((()=>S.color),(()=>{B(I.value)}),{immediate:!1,deep:!0}),i((()=>{M.value=c().pixelRatio})),r((()=>{I.value=S.modelValue,B(I.value)})),n((()=>{R()}));const{proxy:G}=$();function O(e,l,t,a,o){let s=W.value;const u=T.value/2;o||(s/=2);const i=u-s/2;e.strokeStyle=l,e.setStrokeStyle(l),e.setLineWidth(s),e.setLineCap(S.strokeLinecap),e.beginPath(),e.arc(u,u,i,t,a,!S.clockwise),e.stroke(),o&&(e.setLineWidth(s),e.setFillStyle(o),e.fill())}function B(e){new Promise((e=>{if(P)return e(P);P=k(U.value,G),e(P)})).then((a=>{a.clearRect(0,0,T.value,T.value),function(e){O(e,S.layerColor,0,l,S.fill)}(a);const o=(s=e,Math.min(Math.max(s,0),100));var s;0!==o?function(e,a){const o=l*(a/100),s=S.clockwise?t+o:3*Math.PI-(t+o);if(b(S.color)){const l=e.createLinearGradient(T.value,0,0,0);Object.keys(S.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,S.color[e]))),F.value=l}else F.value=S.color;O(e,F.value,t,s)}(a,o):function(e){const t=W.value,a=T.value/2;if(b(S.color)){const l=e.createLinearGradient(T.value,0,0,0);Object.keys(S.color).sort(((e,l)=>parseFloat(e)-parseFloat(l))).map((e=>l.addColorStop(parseFloat(e)/100,S.color[e]))),F.value=l}else F.value=S.color;e.beginPath(),e.arc(a,t/4,t/4,0,l),e.setFillStyle(F.value),e.fill()}(a),a.draw()}))}function R(){L.value&&clearTimeout(L.value)}return(e,l)=>{const t=j,a=w,o=z;return d(),m(a,{class:y(`ht-circle ${e.customClass}`),style:h(e.customStyle)},{default:v((()=>[p(t,{width:T.value,height:T.value,style:h(E.value),id:U.value,"canvas-id":U.value},null,8,["width","height","style","id","canvas-id"]),e.text?(d(),m(o,{key:1,class:"ht-circle__text"},{default:v((()=>[V(_(e.text),1)])),_:1})):(d(),m(a,{key:0,class:"ht-circle__text"},{default:v((()=>[f(e.$slots,"default",{},void 0,!0)])),_:3}))])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-97446343"]]),O=P(t({__name:"Index",setup(t){const{t:o}=C(),s=a(20),u={0:"red",100:"white"};function i(){s.value<100&&(s.value+=10)}function c(){s.value>0&&(s.value-=10)}const r=e();function n(){r.alert(o("cao-zuo-cheng-gong"))}return(e,t)=>{const a=S(F("ht-message-box"),l),o=S(F("ht-circle"),G),r=S(F("demo-block"),T),h=w,f=S(F("ht-button"),W),y=S(F("page-wraper"),E);return d(),m(h,{class:"circle"},{default:v((()=>[p(y,null,{default:v((()=>[p(a),p(r,{title:e.$t("ji-chu-yong-fa")},{default:v((()=>[p(o,{"custom-class":"custom-circle",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),text:s.value+"%"},null,8,["modelValue","text"])])),_:1},8,["title"]),p(r,{title:e.$t("yang-shi-ding-zhi")},{default:v((()=>[p(o,{"custom-class":"custom-circle",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),"stroke-width":6,text:e.$t("kuan-du-ding-zhi")},null,8,["modelValue","text"]),p(o,{"custom-class":"custom-circle",modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),"layer-color":"#eee",color:"#ee0a24",text:e.$t("yan-se-ding-zhi")},null,8,["modelValue","text"]),p(o,{"custom-class":"custom-circle",modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e),color:u,text:e.$t("jian-bian-se")},null,8,["modelValue","text"]),p(o,{"custom-class":"custom-circle",modelValue:s.value,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value=e),color:"#07c160",clockwise:!1,text:e.$t("ni-shi-zhen")},null,8,["modelValue","text"]),p(o,{"custom-class":"custom-circle",modelValue:s.value,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value=e),size:120,text:e.$t("da-xiao-ding-zhi")},null,8,["modelValue","text"])])),_:1},8,["title"]),p(r,{title:e.$t("shi-yong-slot")},{default:v((()=>[p(o,{"custom-class":"custom-circle",modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=e=>s.value=e),"stroke-width":6},{default:v((()=>[p(h,{style:{color:"red"}},{default:v((()=>[V(_(s.value)+"%",1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["title"]),p(r,null,{default:v((()=>[p(f,{"custom-style":"margin-right:24rpx",type:"primary",size:"small",onClick:i},{default:v((()=>[V(_(e.$t("zeng-jia")),1)])),_:1}),p(f,{type:"error",size:"small",onClick:c},{default:v((()=>[V(_(e.$t("jian-shao")),1)])),_:1})])),_:1}),p(r,{title:"alert"},{default:v((()=>[p(f,{onClick:n},{default:v((()=>[V("alert")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-816084a5"]]);export{O as default};
